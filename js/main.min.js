
function tariffs() {
    var swiper = new Swiper(".tariffs__slider .mySwiper", {
        slidesPerView: "auto",
        spaceBetween: 0,
        watchSlidesProgress: true,
        centeredSlides: true,
        direction: "vertical",
        slideToClickedSlide: true,
        pagination: {
            el: ".tariffs__slider-wrap .swiper-pagination",
            clickable: true,
        },
        breakpoints: {
            320: {
                direction: "horizontal",
            },
            993: {
                direction: "vertical",
            },
        }
    });
    var swiper2 = new Swiper(".tariffs__slider-wrap .mySwiper2", {
        slidesPerView: 1,
        effect: "fade",
        // direction: "vertical",
        thumbs: {
            swiper: swiper,
        },
    });

    swiper.on('slideChange', function () {
        swiper2.slideTo(swiper.activeIndex)
    });
    swiper2.on('slideChange', function () {
        swiper.slideTo(swiper2.activeIndex)
    });

    $('.slider-small .swiper-slide').click(function () {
        let id = +$(this).attr("data-id")
        swiper.slideTo(id)
        swiper2.slideTo(id)
    })
}


$(document).ready(function() {

    tariffs();

    //Slider-modal
    $('.pop-up__btn').click(function () {
        let path = $(this).attr("data-tab-path")
        $(this).addClass('pop-up__btn--active')

        $(this).parents(".tariffs__slider-wrap").find(".slider-modal").removeClass("slider-modal--active")
        $(this).parents(".tariffs__slider-wrap").find(`.slider-modal[data-content-path="${path}"]`).addClass("slider-modal--active")
    })

    $('.slider-modal__close').click(function () {
        $('.slider-modal').removeClass('slider-modal--active')
    })

    //Services-card
    $('.service-card').hover(function () {
        let path = $(this).attr("data-card-path")
        $(this).addClass('service-card--active')

        $(this).parents(".services").find(".services__img").removeClass("services__img--active")
        $(this).parents(".services").find(`.services__img[data-img-path="${path}"]`).addClass("services__img--active")
    })

    // Btn-animation
    $('.main__btn').mouseenter(function (e) {
        x = e.pageX - $(this).offset().left;
        y = e.pageY - $(this).offset().top;
        $(this).find('.btn-animation').css({top:y, left:x})
    })

    //Book

    //Wow js
    new WOW().init();

})



// Animation
const animItems = document.querySelectorAll('._anim-items')

if (animItems.length > 0) {
    window.addEventListener('scroll', animOnScroll)
    function animOnScroll(params) {
        for (let index = 0; index < animItems.length; index++) {
            const animItem = animItems[index];
            const animItemHeight = animItem.offsetHeight;
            const animItemOffset = offset(animItem).top;
            const animStart = 4;

            let animItemPoint = window.innerHeight - animItemHeight / animStart;

            if (animItemHeight > window.innerHeight) {
                animItemPoint = window.innerHeight - window.innerHeight / animStart;
            }

            if ((pageYOffset > animItemOffset - animItemPoint) && pageYOffset < (animItemOffset + animItemHeight)) {
                animItem.classList.add('active');
            } else {
                if (!animItem.classList.contains('anim-no-hide')) {
                    animItem.classList.remove('active')
                }
            }
        }
    }
    function offset(el) {
        const rect = el.getBoundingClientRect(),
            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
            scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        return { top: rect.top + scrollTop, left: rect.left + scrollLeft }
    }

    setTimeout(() => {
        animOnScroll();
    }, 300)
}


document.addEventListener('DOMContentLoaded', function() {

    const pageFlip = new St.PageFlip(
        document.getElementById("demoBookExample"),
        {
            width: 550, // base page width
            height: 370, // base page height
            startPage: 2,

            size: "stretch",
            // set threshold values:
            minWidth: 300,

            maxShadowOpacity: 0.5, // Half shadow intensity
            showCover: true,
            mobileScrollSupport: false, // disable content scrolling on mobile devices
        }
    );

    pageFlip.loadFromHTML(document.querySelectorAll(".page"));

    document.querySelector(".page-total").innerText = pageFlip.getPageCount();
    document.querySelector(
        ".page-orientation"
    ).innerText = pageFlip.getOrientation();

    document.querySelector(".btn-prev").addEventListener("click", () => {
        pageFlip.flipPrev(); // Turn to the previous page (with animation)
    });

    document.querySelector(".btn-next").addEventListener("click", () => {
        pageFlip.flipNext(); // Turn to the next page (with animation)
    });

    // triggered by page turning
    pageFlip.on("flip", (e) => {
        document.querySelector(".page-current").innerText = e.data + 1;
    });

    // triggered when the state of the book changes
    pageFlip.on("changeState", (e) => {
        document.querySelector(".page-state").innerText = e.data;
    });

    // triggered when page orientation changes
    pageFlip.on("changeOrientation", (e) => {
        document.querySelector(".page-orientation").innerText = e.data;
    });

});